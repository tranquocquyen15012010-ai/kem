<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>KEM â€“ TÃ i Xá»‰u</title>
<style>
body{font-family:Arial;background:#111;color:#fff;text-align:center}
.box{border:1px solid #333;border-radius:10px;padding:10px;margin:10px}
button{padding:10px 20px;margin:5px;border:none;border-radius:5px}
#log,#chatbox{height:120px;overflow:auto;background:#000;padding:5px}
input{padding:6px}
</style>
</head>
<body>

<h1>ðŸŽ² KEM â€“ TÃ€I Xá»ˆU</h1>

<div class="box">
ðŸ’° Sá»‘ dÆ°: <b id="money"></b><br>
<button onclick="nap()">Náº¡p +500</button>
<button onclick="rut()">RÃºt -500</button>
</div>

<div class="box">
<button onclick="choi('tai')">CHÆ I TÃ€I</button>
<button onclick="choi('xiu')">CHÆ I Xá»ˆU</button>
<p id="ketqua"></p>
<div id="log"></div>
</div>

<div class="box">
<h3>ðŸ’¬ CHAT</h3>
<input id="name" placeholder="TÃªn">
<input id="msg" placeholder="Ná»™i dung">
<button onclick="chat()">Gá»­i</button>
<div id="chatbox"></div>
</div>

<script>
let money = Number(localStorage.money || 1000);
let logs = JSON.parse(localStorage.logs || "[]");
let chats = JSON.parse(localStorage.chats || "[]");

const moneyEl = document.getElementById("money");
const logEl = document.getElementById("log");
const chatEl = document.getElementById("chatbox");

function save(){
 localStorage.money = money;
 localStorage.logs = JSON.stringify(logs);
 localStorage.chats = JSON.stringify(chats);
}

function render(){
 moneyEl.innerText = money;
 logEl.innerHTML = logs.join("<br>");
 chatEl.innerHTML = chats.join("");
}

function rand(){return Math.floor(Math.random()*6)+1}

function choi(chon){
 if(money<100){alert("KhÃ´ng Ä‘á»§ tiá»n");return}
 let a=rand(),b=rand(),c=rand();
 let sum=a+b+c;
 let kq=sum>=11?"tai":"xiu";
 let text=`ðŸŽ² ${a}-${b}-${c} = ${sum} â†’ ${kq.toUpperCase()}`;
 if(chon===kq){money+=100;text+=" âœ… Tháº¯ng"}
 else{money-=100;text+=" âŒ Thua"}
 logs.unshift(text);
 if(logs.length>20)logs.pop();
 save();render();
}

function nap(){money+=500;save();render()}
function rut(){money=Math.max(0,money-500);save();render()}

function chat(){
 let n=name.value||"KhÃ¡ch";
 let m=msg.value;
 if(!m)return;
 chats.push(`<div><b>${n}:</b> ${m}</div>`);
 if(chats.length>20)chats.shift();
 msg.value="";
 save();render();
}

render();
</script>

</body>
</html>
