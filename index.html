<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>TÃ i Xá»‰u KEM</title>
<style>
body{
  margin:0;
  background:linear-gradient(#0f2027,#203a43,#2c5364);
  color:white;
  font-family:Arial;
  overflow:hidden;
  text-align:center;
}
h1{margin:10px;}
#balance{font-size:20px;margin:10px;}
button{
  padding:12px 25px;
  font-size:18px;
  border-radius:10px;
  border:none;
  margin:5px;
  cursor:pointer;
}
#game{margin-top:20px;}
#bowl{
  font-size:120px;
  cursor:pointer;
  transition:transform .5s;
}
#dice{font-size:60px;display:none;}
.animal,.student{
  position:absolute;
  font-size:45px;
  animation:move linear infinite;
}
.animal{top:300px;}
.student{top:200px;}
@keyframes move{
  0%{left:-60px;}
  100%{left:110%;}
}
#chat{
  position:fixed;
  right:10px;
  bottom:10px;
  width:220px;
  background:#000a;
  padding:10px;
  border-radius:10px;
}
#messages{
  height:120px;
  overflow:auto;
  font-size:14px;
  text-align:left;
}
input{
  width:100%;
  padding:5px;
}
</style>
</head>

<body>
<h1>ğŸ² TÃ€I Xá»ˆU KEM ğŸ²</h1>
<div id="balance"></div>

<div id="game">
  <button onclick="bet('TÃ i')">TÃ€I</button>
  <button onclick="bet('Xá»‰u')">Xá»ˆU</button>

  <div id="bowl" onclick="shake()">ğŸ¥£</div>
  <div id="dice">ğŸ² ğŸ² ğŸ²</div>
  <div id="result"></div>
</div>

<div class="animal" style="animation-duration:7s">ğŸ¯</div>
<div class="animal" style="top:350px;animation-duration:9s">ğŸ²</div>
<div class="animal" style="top:400px;animation-duration:6s">ğŸ¶</div>

<div class="student" style="animation-duration:8s">ğŸ§‘â€ğŸ“</div>

<div id="chat">
  <b>ğŸ’¬ Chat</b>
  <div id="messages"></div>
  <input placeholder="Nháº­p chat..." onkeydown="send(event)">
</div>

<script>
let balance=Number(localStorage.kemBalance)||1000;
let choice=null;

function update(){
  balance=Math.max(0,balance);
  document.getElementById("balance").innerText="ğŸ’° Tiá»n: "+balance;
  localStorage.kemBalance=balance;
}
update();

function bet(c){
  choice=c;
  alert("Báº¡n chá»n "+c);
}

function shake(){
  if(!choice){alert("Chá»n TÃ i hoáº·c Xá»‰u");return;}
  let bowl=document.getElementById("bowl");
  let dice=document.getElementById("dice");
  bowl.style.transform="rotate(20deg)";
  setTimeout(()=>bowl.style.transform="rotate(-20deg)",200);
  setTimeout(()=>bowl.style.transform="rotate(0)",400);

  setTimeout(()=>{
    bowl.style.display="none";
    dice.style.display="block";
    let d1=rand(),d2=rand(),d3=rand();
    let sum=d1+d2+d3;
    dice.innerText=icon(d1)+" "+icon(d2)+" "+icon(d3);
    let rs=sum>=11?"TÃ i":"Xá»‰u";
    if(rs===choice){
      balance+=100;
      msg("ğŸ‰ Tháº¯ng "+rs);
    }else{
      balance-=100;
      msg("âŒ Thua "+rs);
    }
    document.getElementById("result").innerText=
      `Tá»•ng: ${sum} â†’ ${rs}`;
    update();
    setTimeout(()=>{
      bowl.style.display="block";
      dice.style.display="none";
      choice=null;
    },2000);
  },600);
}

function rand(){return Math.floor(Math.random()*6)+1;}
function icon(n){return ["","âš€","âš","âš‚","âšƒ","âš„","âš…"][n];}

function msg(t){
  let m=document.getElementById("messages");
  m.innerHTML+="<div>"+t+"</div>";
  m.scrollTop=m.scrollHeight;
}

function send(e){
  if(e.key==="Enter"&&e.target.value){
    msg("ğŸ‘¤ "+e.target.value);
    e.target.value="";
  }
}
</script>
</body>
</html>
